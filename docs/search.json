[
  {
    "objectID": "01-cleaning.html",
    "href": "01-cleaning.html",
    "title": "Cleaning",
    "section": "",
    "text": "Our data all comes from the MLS Players Association but it was published in different formats throughout the years.\n\nWe are starting with some historical data already cleaned by Jeremy Singer-Vine for the Data is Plural newsletter: Github archive. It goes from 2007 to 2017.\n\nIt’s interesting that the DIP PDF for 2017 is different from what I downloaded from the MLSPA site. It appears to have pool MLS players that the downloaded PDFs do not.\n\nI used Tablula to convert 2018 to 2021 data from PDF into CSVs. The data won’t have headers and each file is a little different.\nThe 2022 is available as an Excel file. It did need cleaning.\nThe May version of 2023 data came in Excel, but the September 2023 update was published as a PDF and also as an HTML table that I was able to collect through browser-based scraper.\nThe early 2024 version was released as a CSV and an HTML table. I scraped the HTML table and created an Excel file because it had a player not listed in the csv file.\n\nOnce all the data was imported, I still needed to do some normalization:\n\nAll columns needed the same datatype, etc.\nWe needed to normalize team names. Sometimes team initials are used, and other times full names are used. I wanted both. I used this data to build a complete reference file in Google Sheets and the re-updated the data with that. I also consulted usfootballr for how names and abbreviations were used in hopes of joining with data from that package.\nI wanted to add conference affiliations, which I did manually in the Google Sheet reference.\nI normalized positions with preference for letter designations using hyphens for multi-position players.\n\n\n\n\nI need to double-check all the conference designations before I actually use them.\nI might add color values to the Google Sheet reference since all the packages I’ve checked have been out of date."
  },
  {
    "objectID": "01-cleaning.html#goals-of-this-notebook",
    "href": "01-cleaning.html#goals-of-this-notebook",
    "title": "Cleaning",
    "section": "",
    "text": "Our data all comes from the MLS Players Association but it was published in different formats throughout the years.\n\nWe are starting with some historical data already cleaned by Jeremy Singer-Vine for the Data is Plural newsletter: Github archive. It goes from 2007 to 2017.\n\nIt’s interesting that the DIP PDF for 2017 is different from what I downloaded from the MLSPA site. It appears to have pool MLS players that the downloaded PDFs do not.\n\nI used Tablula to convert 2018 to 2021 data from PDF into CSVs. The data won’t have headers and each file is a little different.\nThe 2022 is available as an Excel file. It did need cleaning.\nThe May version of 2023 data came in Excel, but the September 2023 update was published as a PDF and also as an HTML table that I was able to collect through browser-based scraper.\nThe early 2024 version was released as a CSV and an HTML table. I scraped the HTML table and created an Excel file because it had a player not listed in the csv file.\n\nOnce all the data was imported, I still needed to do some normalization:\n\nAll columns needed the same datatype, etc.\nWe needed to normalize team names. Sometimes team initials are used, and other times full names are used. I wanted both. I used this data to build a complete reference file in Google Sheets and the re-updated the data with that. I also consulted usfootballr for how names and abbreviations were used in hopes of joining with data from that package.\nI wanted to add conference affiliations, which I did manually in the Google Sheet reference.\nI normalized positions with preference for letter designations using hyphens for multi-position players.\n\n\n\n\nI need to double-check all the conference designations before I actually use them.\nI might add color values to the Google Sheet reference since all the packages I’ve checked have been out of date."
  },
  {
    "objectID": "01-cleaning.html#setup",
    "href": "01-cleaning.html#setup",
    "title": "Cleaning",
    "section": "Setup",
    "text": "Setup\n\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(janitor)\nlibrary(teamcolors)"
  },
  {
    "objectID": "01-cleaning.html#import-the-archive-data",
    "href": "01-cleaning.html#import-the-archive-data",
    "title": "Cleaning",
    "section": "Import the archive data",
    "text": "Import the archive data\nThis brings in the Data is Plural files, which should all be the same.\n\ndip_data &lt;- read_csv(c(\n  \"data-processed/data-is-plural/mls-salaries-2007.csv\",\n  \"data-processed/data-is-plural/mls-salaries-2008.csv\",\n  \"data-processed/data-is-plural/mls-salaries-2009.csv\",\n  \"data-processed/data-is-plural/mls-salaries-2010.csv\",\n  \"data-processed/data-is-plural/mls-salaries-2011.csv\",\n  \"data-processed/data-is-plural/mls-salaries-2012.csv\",\n  \"data-processed/data-is-plural/mls-salaries-2013.csv\",\n  \"data-processed/data-is-plural/mls-salaries-2014.csv\",\n  \"data-processed/data-is-plural/mls-salaries-2015.csv\",\n  \"data-processed/data-is-plural/mls-salaries-2016.csv\",\n  \"data-processed/data-is-plural/mls-salaries-2017.csv\"),\n  id = \"file_name\"\n) |&gt; \n  mutate(\n    year = str_sub(file_name, 44, 47)\n  ) |&gt; \n  relocate(year) |&gt; # moving year to front\n  select(!file_name) |&gt;  # dropping file_name\n  rename(club_short = club)\n\nRows: 5553 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (4): club, last_name, first_name, position\ndbl (2): base_salary, guaranteed_compensation\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n# peek\ndip_data |&gt; head()\n\n\n  \n\n\n\n\nCleaning club abbeviations\nThere are times when club abbreviations vary. We fix those here.\nChecking them:\n\ndip_data |&gt; \n  count(club_short)\n\n\n  \n\n\n\nLooking through this, I want to make a number of changes. I also ended up checking the usfootballR package for how they do abbreviations. Using SKC for historical data since it was the same club that changed names.\n\ndip_changed &lt;- dip_data |&gt; \n  mutate(\n    club_short_clean = recode(\n      club_short,\n      \"KC\" = \"SKC\",\n      \"MNUFC\" = \"MIN\",\n      \"TFC\" = \"TOR\",\n      \"NYRB\" = \"NY\",\n      \"NYCFC\" = \"NYC\",\n      \"None\" = NULL,\n      \"POOL\" = \"MLS\",\n      \"Pool\" = \"MLS\"\n    )\n  )\n\nChecking the changes to make sure they are right.\n\ndip_changed |&gt; \n  count(club_short, club_short_clean)\n\n\n  \n\n\n\n\n\nCleaning column names for DIP files\n\ndip_cleaned &lt;- dip_changed |&gt; \n  select(!club_short) |&gt; \n  rename(club_short = club_short_clean) |&gt; \n  relocate(year, club_short)\n\ndip_cleaned |&gt; head()"
  },
  {
    "objectID": "01-cleaning.html#cleaning-tabula-conversions",
    "href": "01-cleaning.html#cleaning-tabula-conversions",
    "title": "Cleaning",
    "section": "Cleaning Tabula conversions",
    "text": "Cleaning Tabula conversions\nEach of these files from years 2018 to 2021 will have different issues.\n\n2018 salaries\nFor this one, the dollar signs came in as their own column, which was actually helpful so the numbers were actually numbers. I also need to add the year.\n\ns2018_imported &lt;- read_csv(\n  \"data-raw/tabula-2018-09-15-Salary-Information-Alphabetical.csv\",\n  col_names = c(\n    \"club_long\",\n    \"last_name\",\n    \"first_name\",\n    \"position\",\n    \"currency_1\",\n    \"base_salary\",\n    \"currency_2\",\n    \"guaranteed_compensation\"\n  )\n) |&gt; \n  select(!starts_with(\"currency\")) |&gt; # removes dollar signs\n  add_column(year = \"2018\", .before = \"club_long\")\n\nRows: 694 Columns: 8\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (6): club_long, last_name, first_name, position, currency_1, currency_2\nnum (2): base_salary, guaranteed_compensation\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\ns2018_imported |&gt; head()\n\n\n  \n\n\n\n\n\n2019 salaries\nFor this one, our salaries come in with $ in the salary fields, and also with a trailing space and ). We import those a “raw” versions and clean them before using type_convert() to have dplyr try to type them again, changing them to numberic. For some reason I couldn’t just convert to as.numeric() even after it was cleaned up as they came up NA. I also add the year.\n\ns2019_imported &lt;- read_csv(\n  \"data-raw/tabula-2019-Salary-List-Fall-Release-FINAL-Salary-List-Fall-Release-MLS.csv\",\n  col_names = c(\n    \"club_long\",\n    \"last_name\",\n    \"first_name\",\n    \"position\",\n    \"base_salary_raw\",\n    \"guaranteed_compensation_raw\"\n  )\n) |&gt; \n  mutate(\n    base_salary = str_remove_all(base_salary_raw, \"[\\\\)\\\\$]\") |&gt; str_trim(),\n    guaranteed_compensation = str_remove_all(guaranteed_compensation_raw, \"[\\\\)\\\\$]\") |&gt; str_trim()\n  ) |&gt; \n  type_convert() |&gt; \n  select(!ends_with(\"raw\")) |&gt; \n  add_column(year = \"2019\", .before = \"club_long\")\n\nRows: 714 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (6): club_long, last_name, first_name, position, base_salary_raw, guaran...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n── Column specification ────────────────────────────────────────────────────────\ncols(\n  club_long = col_character(),\n  last_name = col_character(),\n  first_name = col_character(),\n  position = col_character(),\n  base_salary_raw = col_character(),\n  guaranteed_compensation_raw = col_character(),\n  base_salary = col_number(),\n  guaranteed_compensation = col_number()\n)\n\ns2019_imported |&gt; head()\n\n\n  \n\n\n\n\n\n2020 salaries\n\ns2020_imported &lt;- read_csv(\n  \"data-raw/tabula-2020-Fall-Winter-Salary-List-alphabetical.csv\",\n  col_names = c(\n    \"last_name\",\n    \"first_name\",\n    \"club_long\",\n    \"position\",\n    \"base_salary_raw\",\n    \"guaranteed_compensation_raw\"\n  )\n) |&gt; \n  mutate(\n    base_salary = str_remove(base_salary_raw, \"\\\\$\"),\n    guaranteed_compensation = str_remove(guaranteed_compensation_raw, \"\\\\$\"),\n  ) |&gt; \n  select(!ends_with(\"raw\")) |&gt; \n  type_convert() |&gt; \n  add_column(year = \"2020\", .before = \"last_name\")\n\nRows: 778 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (6): last_name, first_name, club_long, position, base_salary_raw, guaran...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n── Column specification ────────────────────────────────────────────────────────\ncols(\n  last_name = col_character(),\n  first_name = col_character(),\n  club_long = col_character(),\n  position = col_character(),\n  base_salary = col_number(),\n  guaranteed_compensation = col_number()\n)\n\ns2020_imported |&gt; head()\n\n\n  \n\n\n\n\n\n2021 salaries\n\ns2021_imported &lt;- read_csv(\n  \"data-raw/tabula-2021-MLSPA-Fall-Salary-release (1).csv\",\n  col_names = c(\n    \"club_long\",\n    \"last_name\",\n    \"first_name\",\n    \"position\",\n    \"base_salary_raw\",\n    \"guaranteed_compensation_raw\"\n  )\n) |&gt; \n  mutate(\n    base_salary = str_remove(base_salary_raw, \"\\\\$\"),\n    guaranteed_compensation = str_remove(guaranteed_compensation_raw, \"\\\\$\"),\n  ) |&gt; \n  select(!ends_with(\"raw\")) |&gt; \n  type_convert() |&gt; \n  add_column(year = \"2021\", .before = \"club_long\")\n\nWarning: One or more parsing issues, call `problems()` on your data frame for details,\ne.g.:\n  dat &lt;- vroom(...)\n  problems(dat)\n\n\nRows: 871 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (6): club_long, last_name, first_name, position, base_salary_raw, guaran...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n── Column specification ────────────────────────────────────────────────────────\ncols(\n  club_long = col_character(),\n  last_name = col_character(),\n  first_name = col_character(),\n  position = col_character(),\n  base_salary = col_number(),\n  guaranteed_compensation = col_number()\n)\n\ns2021_imported |&gt; head()"
  },
  {
    "objectID": "01-cleaning.html#import-excel-data",
    "href": "01-cleaning.html#import-excel-data",
    "title": "Cleaning",
    "section": "Import excel data",
    "text": "Import excel data\n\n2022 data\n\ns2022_imported &lt;- read_excel(\"data-raw/MLS Salary 2022.xlsx\") |&gt; clean_names() |&gt; \n  add_column(year = \"2022\", .before = \"first_name\") |&gt; \n  rename(position = position_s,\n         club_long = club)\n\ns2022_imported |&gt; glimpse()\n\nRows: 841\nColumns: 7\n$ year                    &lt;chr&gt; \"2022\", \"2022\", \"2022\", \"2022\", \"2022\", \"2022\"…\n$ first_name              &lt;chr&gt; \"Artur\", \"Nanú\", \"Zeca\", \"Luquinhas\", \"Judson\"…\n$ last_name               &lt;chr&gt; NA, NA, NA, NA, NA, NA, \"Ågren\", \"Aaronson\", \"…\n$ club_long               &lt;chr&gt; \"Columbus Crew\", \"FC Dallas\", \"Houston Dynamo\"…\n$ position                &lt;chr&gt; \"M\", \"D\", \"D\", \"F\", \"M\", \"D\", \"D\", \"M\", \"D\", \"…\n$ base_salary             &lt;dbl&gt; 564000, 600000, 218182, 1050000, 420000, 40000…\n$ guaranteed_compensation &lt;dbl&gt; 615633, 668750, 259015, 1173125, 425000, 42875…\n\n\n\n\n2023 data\nThe first version for 2023 was available as an Excel file. However, there was an update in September of 2023 that was available for download as a PDF (saved in data-raw) but also published as an HTML table that I was able to use a browser-based scraper to create an Excel file. It is this Excel file that I’m using.\n\ns2023_imported &lt;- read_excel(\"data-raw/2023-Salary-Report-as-of-Sept-15-2023.xlsx\") |&gt; clean_names() |&gt; \n  add_column(year = \"2023\", .before = \"first_name\") |&gt; \n  rename(position = position_s,\n         club_long = club)\n\ns2023_imported |&gt; glimpse()\n\nRows: 924\nColumns: 7\n$ year                    &lt;chr&gt; \"2023\", \"2023\", \"2023\", \"2023\", \"2023\", \"2023\"…\n$ first_name              &lt;chr&gt; \"Luis\", \"Lalas\", \"Nicolás\", \"Alonso\", \"Ifunany…\n$ last_name               &lt;chr&gt; \"Abram\", \"Abubakar\", \"Acevedo\", \"Aceves\", \"Ach…\n$ club_long               &lt;chr&gt; \"Atlanta United\", \"Colorado Rapids\", \"New York…\n$ position                &lt;chr&gt; \"D\", \"D\", \"D-M\", \"D\", \"F\", \"D-M\", \"M\", \"M-F\", …\n$ base_salary             &lt;dbl&gt; 556364, 665000, 230000, 330000, 85444, 1250000…\n$ guaranteed_compensation &lt;dbl&gt; 695977, 702125, 274800, 368900, 85444, 1365000…\n\n\n\n\n2024 data\nThis 2024 Excel file was created by scraping an HTML table from the MLSPA site. There is a May 2024 csv file available, but it is missing Toronto FC player Aimé Mabika.\n\ns2024_imported &lt;- read_excel(\"data-raw/2024-Salary-Report-as-of-Apr-25-2023.xlsx\") |&gt; clean_names() |&gt; \n  add_column(year = \"2024\", .before = \"first_name\") |&gt;\n  rename(position = position_s,\n         club_long = club)\n\ns2024_imported |&gt; glimpse()\n\nRows: 874\nColumns: 7\n$ year                    &lt;chr&gt; \"2024\", \"2024\", \"2024\", \"2024\", \"2024\", \"2024\"…\n$ first_name              &lt;chr&gt; \"Liel\", \"Luis\", \"Lalas\", \"Nicolás\", \"Kellyn\", …\n$ last_name               &lt;chr&gt; \"Abada\", \"Abram\", \"Abubakar\", \"Acevedo\", \"Acos…\n$ club_long               &lt;chr&gt; \"Charlotte FC\", \"Atlanta United\", \"Colorado Ra…\n$ position                &lt;chr&gt; \"Right Wing\", \"Center-back\", \"Center-back\", \"D…\n$ base_salary             &lt;dbl&gt; 2300000, 732275, 665000, 300000, 1392188, 2960…\n$ guaranteed_compensation &lt;dbl&gt; 2448500, 871888, 702125, 344800, 1558869, 4216…\n\n\n\nChecking 2024 csv\nI would prefer to use this downloadable csv, but it is missing a player.\n\ns2024_csv &lt;- read_csv(\"data-raw/MLS-Salaries-as-of-4-25-2024-for-release-Final.txt\") |&gt; clean_names() |&gt; \n  add_column(year = \"2024\", .before = \"first_name\") |&gt;\n  rename(position = position_s,\n         club_long = club,\n         guaranteed_compensation = guaranteed_comp) |&gt; \n  mutate(across(6:7, parse_number))\n\nRows: 873 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (6): First Name, Last Name, Club, Position(s), Base Salary, Guaranteed Comp\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\ns2024_csv |&gt; \n  glimpse()\n\nRows: 873\nColumns: 7\n$ year                    &lt;chr&gt; \"2024\", \"2024\", \"2024\", \"2024\", \"2024\", \"2024\"…\n$ first_name              &lt;chr&gt; \"Daniel\", \"Santiago\", \"Franco\", \"Edwin\", \"Tris…\n$ last_name               &lt;chr&gt; \"Ríos\", \"Sosa\", \"Ibarra\", \"Mosquera\", \"Muyumba…\n$ club_long               &lt;chr&gt; \"Atlanta United\", \"Atlanta United\", \"Atlanta U…\n$ position                &lt;chr&gt; \"Center Forward\", \"Defensive Midfield\", \"Defen…\n$ base_salary             &lt;dbl&gt; 89716, 685000, 600000, 400000, 525000, 500000,…\n$ guaranteed_compensation &lt;dbl&gt; 126383, 778100, 660000, 437000, 566600, 595000…\n\n\nWho is missing?\n\ns2024_imported |&gt; \n  anti_join(s2024_csv)\n\nJoining with `by = join_by(year, first_name, last_name, club_long, position,\nbase_salary, guaranteed_compensation)`"
  },
  {
    "objectID": "01-cleaning.html#merge-non-dip-data",
    "href": "01-cleaning.html#merge-non-dip-data",
    "title": "Cleaning",
    "section": "Merge non-dip data",
    "text": "Merge non-dip data\nThe tabula and excel data both use long club names, so I’ll put those together.\n\nnon_dip_data &lt;- s2018_imported |&gt; \n  bind_rows(s2019_imported, s2020_imported, s2021_imported, s2022_imported, s2023_imported, s2024_imported)\n\nnon_dip_data |&gt; glimpse()\n\nRows: 5,696\nColumns: 7\n$ year                    &lt;chr&gt; \"2018\", \"2018\", \"2018\", \"2018\", \"2018\", \"2018\"…\n$ club_long               &lt;chr&gt; \"New York Red Bulls\", \"New York City FC\", \"Col…\n$ last_name               &lt;chr&gt; \"Abang\", \"Abdul-Salaam\", \"Abu\", \"Abubakar\", \"A…\n$ first_name              &lt;chr&gt; \"Anatole\", \"Saad\", \"Mohammed\", \"Lalas\", \"David…\n$ position                &lt;chr&gt; \"F\", \"D\", \"M\", \"D\", \"F-M\", \"M\", \"F-M\", \"M\", \"M…\n$ base_salary             &lt;dbl&gt; 68927.00, 106480.00, 175008.00, 68250.04, 1250…\n$ guaranteed_compensation &lt;dbl&gt; 68927.00, 120230.00, 181258.00, 75750.04, 1250…"
  },
  {
    "objectID": "01-cleaning.html#cleaning-long-names-in-non-dip-data",
    "href": "01-cleaning.html#cleaning-long-names-in-non-dip-data",
    "title": "Cleaning",
    "section": "Cleaning long names in non-dip data",
    "text": "Cleaning long names in non-dip data\nChecking the names for errors.\n\nnon_dip_data |&gt; \n  count(club_long)\n\n\n  \n\n\n\nSome things of note:\n\n2021 New England Revolution may be missing last n.\nMontreal should probably be CF Montréal\n“MLS Pool” changed to “Major League Soccer” for consistency\n\nThere are other changes as well based on usfootballR package, etc.\n\nnon_dip_changed &lt;- non_dip_data |&gt; \n  mutate(\n    club_long_changed = case_match(\n      club_long,\n      \"Atlanta United\" ~ \"Atlanta United FC\",\n      \"Chicago Fire\" ~ \"Chicago Fire FC\",\n      \"Houston Dynamo\" ~ \"Houston Dynamo FC\",\n      \"CF Montreal\" ~ \"CF Montréal\",\n      \"Montreal\" ~ \"CF Montréal\",\n      # \"Montreal Impact\" ~ \"CF Montréal\",\n      \"Inter Miami\" ~ \"Inter Miami CF\",\n      \"New England Revolutio\" ~ \"New England Revolution\",\n      \"DC United\" ~ \"D.C. United\",\n      \"St. Louis City SC\" ~ \"St. Louis CITY SC\",\n      \"Minnesota United\" ~ \"Minnesota United FC\",\n      \"MLS Pool\" ~ \"Major League Soccer\",\n      .default = club_long\n    )\n  )\n\nnon_dip_changed  |&gt; \n  count(club_long, club_long_changed)\n\n\n  \n\n\n\nNow we’ll fix up the columns.\n\nnon_dip_cleaned &lt;- non_dip_changed |&gt; \n  select(-club_long) |&gt; \n  rename(club_long = club_long_changed) |&gt; \n  relocate(year, club_long)\n\nnon_dip_cleaned |&gt; glimpse()\n\nRows: 5,696\nColumns: 7\n$ year                    &lt;chr&gt; \"2018\", \"2018\", \"2018\", \"2018\", \"2018\", \"2018\"…\n$ club_long               &lt;chr&gt; \"New York Red Bulls\", \"New York City FC\", \"Col…\n$ last_name               &lt;chr&gt; \"Abang\", \"Abdul-Salaam\", \"Abu\", \"Abubakar\", \"A…\n$ first_name              &lt;chr&gt; \"Anatole\", \"Saad\", \"Mohammed\", \"Lalas\", \"David…\n$ position                &lt;chr&gt; \"F\", \"D\", \"M\", \"D\", \"F-M\", \"M\", \"F-M\", \"M\", \"M…\n$ base_salary             &lt;dbl&gt; 68927.00, 106480.00, 175008.00, 68250.04, 1250…\n$ guaranteed_compensation &lt;dbl&gt; 68927.00, 120230.00, 181258.00, 75750.04, 1250…"
  },
  {
    "objectID": "01-cleaning.html#building-both-names",
    "href": "01-cleaning.html#building-both-names",
    "title": "Cleaning",
    "section": "Building both names",
    "text": "Building both names\nI’d like to have club_long and club_short for each row of data, but to do that I need to build a conversion chart of some kind.\nIt is club_short that I’d like to be consistent for a market, where club_long changes as branding changes.\nHow I tackled this:\n\nGet a list of all the short names\nGet a list of all the long names\nAdd them both to a Google Sheet and match them manually\nDownload that sheet and then use joins to fill gaps\n\nI used the following to get the names, though just to copy into a spreadsheet for a lot of manual research and work.\n\nclubs_short &lt;- dip_cleaned |&gt; distinct(year, club_short) |&gt; \n  arrange(year, club_short)\n\n# clubs_short |&gt; clipr::write_clip()\n\nclubs_long &lt;- non_dip_data |&gt; distinct(year, club_long) |&gt; \n  arrange(year, club_long)\n\n# clubs_long |&gt; clipr::write_clip()\n\n\nDownloading in the spreadsheet\nThe edited Google Sheet is here: rws-mls-salaries\nDownload the clubs list. Commented out after saved locally. Then viewed club names to verify/check them.\n\n# download.file(\"https://docs.google.com/spreadsheets/d/e/2PACX-1vQqXJxbbrBsikirZrGyXYV_G6cFZp_dYmcf52UfSYM7Kw3akGlkO5jKP8ZL8WtRA5qUJgFMNPG8JYov/pub?output=csv\", \"data-processed/clubs-list.csv\")\n\nclubs_list &lt;- read_csv(\"data-processed/clubs-list.csv\") |&gt; \n  mutate(year = as.character(year))\n\nRows: 410 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): club_short, club_long, conference\ndbl (1): year\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nclubs_list |&gt; \n  count(club_short, club_long)\n\n\n  \n\n\n\n\nFill in our DIP\nThe DIP data doesn’t have club_long. We’ll join with our master clubs list to get them.\n\ndip_full &lt;- dip_cleaned |&gt; \n  left_join(clubs_list, join_by(year == year, club_short == club_short))\n\ndip_full |&gt; head()\n\n\n  \n\n\n\nCheck for those that did not get a long name to see why.\n\ndip_full |&gt; \n  filter(is.na(club_long))\n\n\n  \n\n\n\nThese players are not attached to teams.\n\n\nFill in non-dip\nThe non-DIP data doesn’t have the short name, so we join with clubs_list reference file for them.\n\nnon_dip_full &lt;- non_dip_cleaned |&gt; \n  left_join(clubs_list, join_by(year == year, club_long == club_long))\n\nnon_dip_full |&gt; head()\n\n\n  \n\n\n\nCheck those that did not get a short name to research why.\n\nnon_dip_full |&gt; \n  filter(is.na(club_short))"
  },
  {
    "objectID": "01-cleaning.html#merge-all-the-versions-together",
    "href": "01-cleaning.html#merge-all-the-versions-together",
    "title": "Cleaning",
    "section": "Merge all the versions together",
    "text": "Merge all the versions together\n\nbinded &lt;- dip_full |&gt; \n  bind_rows(non_dip_full) |&gt; \n  select(\n    year,\n    club_short,\n    last_name,\n    first_name,\n    position,\n    base_salary,\n    compensation = guaranteed_compensation,\n    club_long,\n    conference\n  )\n\nbinded |&gt; glimpse()\n\nRows: 11,249\nColumns: 9\n$ year         &lt;chr&gt; \"2007\", \"2007\", \"2007\", \"2007\", \"2007\", \"2007\", \"2007\", \"…\n$ club_short   &lt;chr&gt; \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"…\n$ last_name    &lt;chr&gt; \"Armas\", \"Banner\", \"Barrett\", \"Blanco\", \"Brown\", \"Busch\",…\n$ first_name   &lt;chr&gt; \"Chris\", \"Michael\", \"Chad\", \"Cuauhtemoc\", \"C.J.\", \"Jon\", …\n$ position     &lt;chr&gt; \"M\", \"M\", \"F\", \"F\", \"D\", \"GK\", \"F\", \"D\", \"M\", \"D\", \"D\", \"…\n$ base_salary  &lt;dbl&gt; 225000.0, 12900.0, 41212.5, 2492316.0, 106391.0, 58008.0,…\n$ compensation &lt;dbl&gt; 225000.0, 12900.0, 48712.5, 2666778.0, 106391.0, 58008.0,…\n$ club_long    &lt;chr&gt; \"Chicago Fire FC\", \"Chicago Fire FC\", \"Chicago Fire FC\", …\n$ conference   &lt;chr&gt; \"Eastern\", \"Eastern\", \"Eastern\", \"Eastern\", \"Eastern\", \"E…"
  },
  {
    "objectID": "01-cleaning.html#clean-positions",
    "href": "01-cleaning.html#clean-positions",
    "title": "Cleaning",
    "section": "Clean positions",
    "text": "Clean positions\nPeek at the positions.\n\nbinded |&gt; \n  count(position)\n\n\n  \n\n\n## Help to get me a list of positions\n# binded |&gt; distinct(position) |&gt; pull() |&gt; clipr::write_clip()\n\nIt’s clear some cleanup is needed, and will take some decisions. I’m going to go with letter designations with hyphens when necessary.\n\npositions &lt;- binded |&gt; \n  mutate(\n    position_new = \n    case_match(\n      position,\n      # \"M\" ~ \"\",\n      # \"F\" ~ \"\",\n      # \"D\" ~ \"\",\n      # \"GK\" ~ \"\",\n      # \"D-M\" ~ \"\",\n      # \"F-D\" ~ \"\",\n      # \"F-M\" ~ \"\",\n      # \"M-D\" ~ \"\",\n      # \"M-F\" ~ \"\",\n      # \"D-F\" ~ \"\",\n      \"MF\" ~ \"M-F\",\n      \"M/F\" ~ \"M-F\",\n      \"M/D\" ~ \"M-D\",\n      \"D/M\" ~ \"D-M\",\n      \"D/F\" ~ \"D-F\",\n      \"F/M\" ~ \"F-M\",\n      # \"NA\" ~ \"\",\n      \"Right Wing\" ~ \"F\",\n      \"Center-back\" ~ \"D\",\n      \"Defensive Midfield\" ~ \"D-M\",\n      \"Attacking Midfield\" ~ \"M-F\",\n      \"Center Forward\" ~ \"F\",\n      \"Left-back\" ~ \"D\",\n      \"Central Midfield\" ~ \"M\",\n      \"Forward\" ~ \"F\",\n      \"Right-back\" ~ \"F\",\n      \"Left Wing\" ~ \"F\",\n      \"Goalkeeper\" ~ \"GK\",\n      \"Left Midfield\" ~ \"M\",\n      \"Right Midfield\" ~ \"M\",\n      \"Midfielder\" ~ \"M\",\n      \"Defender\" ~ \"D\",\n      .default = position\n    )\n  )\n\npositions |&gt; \n  count(position, position_new)\n\n\n  \n\n\n\nClean up the columns\n\npositions_fixed &lt;- positions |&gt; \n  select(!position) |&gt; \n  rename(position = position_new) |&gt; \n  relocate(position, .after = first_name)\n\npositions_fixed"
  },
  {
    "objectID": "01-cleaning.html#export-the-cleaned-data",
    "href": "01-cleaning.html#export-the-cleaned-data",
    "title": "Cleaning",
    "section": "Export the cleaned data",
    "text": "Export the cleaned data\nAssign last cleaning dataframe and export\n\nmls_salaries &lt;- positions_fixed |&gt; \n  arrange(year, club_short, last_name, first_name)\n\nmls_salaries |&gt; write_rds(\"data-processed/mls-salaries.rds\")"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "MLS Salaries",
    "section": "",
    "text": "This is an analysis of MLS Salary data from the MLS Players Association. They have published the data since 2007, but formats vary widely. There are other cleaning challenges tackled as well.\nThis is updated through the early salary release in the 2024 season.\nThe main notebooks are Cleaning and Analysis 2024. There are some other exploratory notebooks that are not yet included in findings below.\nThe code is public on Github. The published notebooks are on Quarto Pub.\n\n\n\nPlayers that were paid the most over time and recently\nTeams that spent the most over time and recently\nTop spending teams over the past several years\nFuture consideration: Is it possible to compare club spending to season results? This will require more data and perhaps other packages.\n\n\n\n\n\n\nUpon his signing on July 2023, Lionel Messi became the highest paid player in the history of the Major League Soccer with a total compensation over $20 million. However, investing in players was not a new concept for Inter Miami CF, as they had been among the top spending teams since 2020, according to an analysis of player salaries.\nThe analysis was based on 2007-2024 player salary released by the Major League Soccer Player’s Association. It was not adjusted for inflation.\n\n\n\n\nLorenzo Insigne of Toronto started the 2023 season as the highest paid player at $15.5 million before Messi was signed in July. They were the only players earning more than $10 million within a year.\nIn early 2024, Austin FC’s Sebastián Driussi was the 5th highest player. In 2023, Driussi was 6th.\nInter Miami and Toronto FC had two top 10 earners on their rosters.\nGiven the historic signing of Lionel Messi, it is no surprise that Inter Miami have the highest team salary for the 2023 and 2024 seasons. Toronto has ranked second on the power of having two players making over $5 million, Lorenzo Insigne and Federico Bernardeschi.\nLooking at the most expensive rosters in the MLS over time, Toronto FC has been the top-spending team seven times.\nToronto FC and Inter Miami have been top five spenders in each of the past five years.\n\n\n\n\n\n\n\n\nThis research from 2017 may prove interesting, but I haven’t done anything with it yet."
  },
  {
    "objectID": "index.html#summary-of-findings",
    "href": "index.html#summary-of-findings",
    "title": "MLS Salaries",
    "section": "",
    "text": "Upon his signing on July 2023, Lionel Messi became the highest paid player in the history of the Major League Soccer with a total compensation over $20 million. However, investing in players was not a new concept for Inter Miami CF, as they had been among the top spending teams since 2020, according to an analysis of player salaries.\nThe analysis was based on 2007-2024 player salary released by the Major League Soccer Player’s Association. It was not adjusted for inflation.\n\n\n\n\nLorenzo Insigne of Toronto started the 2023 season as the highest paid player at $15.5 million before Messi was signed in July. They were the only players earning more than $10 million within a year.\nIn early 2024, Austin FC’s Sebastián Driussi was the 5th highest player. In 2023, Driussi was 6th.\nInter Miami and Toronto FC had two top 10 earners on their rosters.\nGiven the historic signing of Lionel Messi, it is no surprise that Inter Miami have the highest team salary for the 2023 and 2024 seasons. Toronto has ranked second on the power of having two players making over $5 million, Lorenzo Insigne and Federico Bernardeschi.\nLooking at the most expensive rosters in the MLS over time, Toronto FC has been the top-spending team seven times.\nToronto FC and Inter Miami have been top five spenders in each of the past five years."
  },
  {
    "objectID": "index.html#resources",
    "href": "index.html#resources",
    "title": "MLS Salaries",
    "section": "",
    "text": "This research from 2017 may prove interesting, but I haven’t done anything with it yet."
  },
  {
    "objectID": "explore-data-conversion.html",
    "href": "explore-data-conversion.html",
    "title": "Data conversion",
    "section": "",
    "text": "Warning\n\n\n\nNot really using this notebook\n\n\nThe goal here is to convert all the PDF-based salary tables to data. Some packages we’ll explore:\n\npdftools\ntabulizer\n\nThe data was downloaded from the MLS Players Association\nI have not been able to install tabulizer. I’ve also found some of the historical data from Data is Plural, so I’m going to us other methods."
  },
  {
    "objectID": "explore-data-conversion.html#about-this-notebook",
    "href": "explore-data-conversion.html#about-this-notebook",
    "title": "Data conversion",
    "section": "",
    "text": "Warning\n\n\n\nNot really using this notebook\n\n\nThe goal here is to convert all the PDF-based salary tables to data. Some packages we’ll explore:\n\npdftools\ntabulizer\n\nThe data was downloaded from the MLS Players Association\nI have not been able to install tabulizer. I’ve also found some of the historical data from Data is Plural, so I’m going to us other methods."
  },
  {
    "objectID": "explore-data-conversion.html#setup",
    "href": "explore-data-conversion.html#setup",
    "title": "Data conversion",
    "section": "Setup",
    "text": "Setup\n\nlibrary(tidyverse)\nlibrary(pdftools)\n# library(tabulizer)"
  },
  {
    "objectID": "explore-data-conversion.html#conversion-attempt",
    "href": "explore-data-conversion.html#conversion-attempt",
    "title": "Data conversion",
    "section": "Conversion attempt",
    "text": "Conversion attempt\n\npdf_text(\"data-raw/2007-08-31-Salary-Information-Alphabetical.pdf\")\n\n[1] \"                   2007 MLS Player Salaries: August 31, 2007: Alphabetical\\n                                                          2007            2007 Guaranteed\\n Club   Last Name           First Name       Pos       Base Salary         Compensation\\n  DC    Addlery             Nicholas         F     $        36,000.00   $          36,000.00\\n  LA    Albright            Chris            M-D   $       142,500.00   $         142,500.00\\n  NY    Altidore            Josmer           F     $        85,000.00   $         108,333.00\\n DAL    Alvarez             Arturo           M     $        32,819.00   $          46,019.00\\n  NY    Angel               Juan Pablo       F     $     1,500,000.00   $       1,593,750.00\\n  DC    Arguez              Bryan            M-D   $        45,000.00   $          76,200.00\\n CHI    Armas               Chris            M     $       225,000.00   $         225,000.00\\n  KC    Arnaud              Davy             M     $       100,000.00   $         101,875.00\\n CHV    Arvizu              David            F     $        33,000.00   $          40,500.00\\n HOU    Ashe                Corey            M     $        30,000.00   $          30,000.00\\n TFC    Attakora-Gyan       Nana             D     $        12,900.00   $          12,900.00\\n COL    Ballouchy           Mehdi            M     $        70,000.00   $          88,000.00\\n CHI    Banner              Michael          M     $        12,900.00   $          12,900.00\\n CHI    Barrett             Chad             F     $        41,212.50   $          48,712.50\\n HOU    Barrett             Wade             D     $       141,750.00   $         141,750.00\\n RSL    Beckerman           Kyle             M     $       120,000.00   $         122,500.00\\n  LA    Beckham             David            M     $     5,500,000.08   $       6,500,000.04\\n RSL    Besagno             Nikolas          M     $        75,000.00   $         111,500.00\\n CHI    Blanco              Cuauhtemoc       F     $     2,492,316.00   $       2,666,778.00\\n CHV    Bornstein           Jonathan         D     $        57,500.00   $          57,500.00\\n  DC    Boswell             Robert           D     $        30,870.00   $          30,870.00\\n DAL    Botero              Juan Sebastian   M     $        12,900.00   $          12,900.00\\n TFC    Boyens              Andrew           D     $        30,000.00   $          47,500.00\\n TFC    Braz                Adam             D     $        67,200.00   $          74,950.00\\n TFC    Brennan             Jim              D     $       150,000.00   $         158,000.00\\n CHV    Brooks              Desmond          D     $        12,900.00   $          12,900.00\\n CHI    Brown               C.J.             D     $       106,391.00   $         106,391.00\\n RSL    Brown               Kyle             F     $        17,700.00   $          17,700.00\\n RSL    Brown               Chris            M-F   $        70,000.00   $          70,000.00\\n  LA    Buddle              Edson            F     $       140,000.00   $         150,000.00\\n  DC    Burch               Marc             D     $        30,000.00   $          30,000.00\\n  KC    Burciaga            Jose             D     $       100,000.00   $         102,500.00\\n CHV    Burling             Bobby            F-D   $        12,900.00   $          12,900.00\\n CHV    Burpo               Preston          GK    $        52,491.60   $          52,491.60\\n DAL    Burse               Ray              GK    $        17,700.00   $          17,700.00\\n CHI    Busch               Jon              GK    $        58,008.00   $          58,008.00\\n  NE    Byrne               Bryan            M     $        30,000.00   $          30,000.00\\n  NY    Caccavale           Salvatore        M     $        12,900.00   $          12,900.00\\n  NY    Camp                Blake            M     $        12,900.00   $          12,900.00\\n COL    Cancela             Jose             M     $       156,000.00   $         156,000.00\\n TFC    Canizalez           Maycoll          M     $        36,000.00   $          40,000.00\\n  LA    Cannon              Joe              GK    $       192,000.00   $         192,000.00\\n CHI    Carr                Calen            F     $        38,000.00   $          50,500.00\\n  DC    Carreiro da Silva   Fred             M-F   $       190,008.00   $         222,008.00\\n  DC    Carroll             Brian            M     $       115,000.00   $         118,750.00\\n  DC    Carroll             Jeff             M-D   $        12,900.00   $          12,900.00\\n COL    Casey               Conor            F     $       180,000.00   $         180,000.00\\n  LA    Caso                Mike             M     $        12,900.00   $          12,900.00\\n  NY    Cepero              Danny            GK    $        12,900.00   $          12,900.00\\n HOU    Chabala             Mike             M     $        17,700.00   $          17,700.00\\n HOU    Ching               Brian            F     $       220,000.00   $         220,000.00\\n COL    Clark               Colin            F     $        17,700.00   $          17,700.00\\n HOU    Clark               Ricardo          M     $       195,000.00   $         195,000.00\\n\\nSource: Major League Soccer Players Union\\n\"                                                                                                              \n[2] \"                   2007 MLS Player Salaries: August 31, 2007: Alphabetical\\n                                                          2007           2007 Guaranteed\\n Club   Last Name           First Name      Pos        Base Salary        Compensation\\n HOU    Cochrane            Ryan            D      $       51,149.00   $         66,149.00\\n COL    Colaluca            Nico            M      $       45,000.00   $         78,000.00\\n  KC    Colombano           Eloy            F-M    $       42,000.00   $         42,000.00\\n CHI    Conde               Wilman          D      $      144,000.00   $        151,500.00\\n  KC    Conrad              Jimmy           D      $      194,750.00   $        206,000.00\\n  NY    Conway              Jon             GK     $       65,000.00   $         65,750.00\\n COL    Cooke               Terry           M      $      147,500.00   $        152,500.00\\n DAL    Cooper              Kenny           F      $       80,000.00   $         83,000.00\\n CHI    Correa              Thiago          M      $       44,100.00   $         44,100.00\\n COL    Coundoul            Bouna           GK     $       30,000.00   $         30,000.00\\n  NE    Cristman            Adam            F      $       17,700.00   $         17,700.00\\n  LA    Cronin              Steve           GK     $       34,728.75   $         42,228.75\\n  DC    Crowe               Shawn           GK     $       12,900.00   $         12,900.00\\n COL    Cummings            Omar            F      $       30,000.00   $         30,000.00\\n CHV    Cunliffe            John            F      $       30,000.00   $         45,000.00\\n TFC    Cunningham          Jeffrey         F      $      220,000.00   $        232,500.00\\n RSL    Curfman             Steven          M      $       12,900.00   $         12,900.00\\n CHI    Curtin              Jeff            D      $       12,900.00   $         12,900.00\\n CHI    Curtin              Jim             D      $      120,750.00   $        120,750.00\\n RSL    Cutler              Kenny           M      $       30,000.00   $         30,000.00\\n HOU    Dalglish            Paul            F      $       96,000.00   $        101,000.00\\n DAL    Daniels             Andrew          D      $       12,900.00   $         12,900.00\\n HOU    Davis               Brad            M      $      120,000.00   $        120,000.00\\n DAL    De Oliveira         Denilson        M      $      872,736.00   $        879,936.00\\n DAL    Dello-Russo         Michael         D      $       12,900.00   $         12,900.00\\n HOU    DeRosario           Dwayne          M      $      324,999.96   $        324,999.96\\n  DC    DeRoux              Stephen         M      $       12,900.00   $         12,900.00\\n TFC    Dichio              Daniel          F      $      150,000.00   $        158,125.00\\n COL    DiRaimondo          John            M      $       12,900.00   $         12,900.00\\n TFC    Djekanovic          Srdjan          GK     $       17,700.00   $         17,700.00\\n  NY    Doe                 Francis         F      $       48,000.00   $         48,000.00\\n  LA    Donovan             Landon          F      $      900,000.00   $        900,000.00\\n  NE    Dorman              Andy            M      $       30,870.00   $         30,870.00\\n TFC    Dunivant            Todd            D      $       99,750.00   $         99,750.00\\n  DC    Dyachenko           Rod             M      $       17,700.00   $         17,700.00\\n HOU    Ebert               Eric            M      $       12,900.00   $         12,900.00\\n TFC    Edu                 Maurice         M      $       50,000.00   $        132,500.00\\n  KC    Elcock              Edson           M-F    $       17,700.00   $         17,700.00\\n  DC    Emilio              Luciano         F      $      265,000.00   $        293,125.00\\n COL    Erpen               Facundo         D      $      115,000.00   $        115,000.00\\n RSL    Eskandarian         Alecko          F      $      155,000.00   $        175,500.00\\n RSL    Espindola           Edgar           F      $       72,000.00   $         72,000.00\\n CLB    Evans               Brad            F      $       17,700.00   $         17,700.00\\n RSL    Findley             Robert          F      $       36,000.00   $         48,500.00\\n  NE    Flood               Gary            D      $       12,900.00   $         12,900.00\\n CHV    Flores              Jorge           M      $       12,900.00   $         13,275.00\\n RSL    Forko               Willis          D      $       30,000.00   $         30,000.00\\n  NE    Franchino           Joey            D      $       90,000.00   $         90,000.00\\n CHI    Franks              Floyd           M      $       17,700.00   $         17,700.00\\n  NY    Freeman             Hunter          D-M    $       50,600.00   $         60,600.00\\n  LA    Friesz              Lance           GK     $       12,900.00   $         12,900.00\\n TFC    Gala                Gabriel         M      $       12,900.00   $         12,900.00\\n CHV    Galindo             Maykel          F      $       72,500.00   $         72,500.00\\n\\nSource: Major League Soccer Players Union\\n\"                                                                                                                                                                                                                          \n[3] \"                   2007 MLS Player Salaries: August 31, 2007: Alphabetical\\n                                                          2007           2007 Guaranteed\\n Club   Last Name           First Name      Pos        Base Salary        Compensation\\n  KC    Garcia              Nick            D      $      131,250.00   $        136,250.00\\n CLB    Garey               Jason           F      $       41,250.00   $         53,750.00\\n COL    Gargan              Daniel          M      $       30,000.00   $         30,000.00\\n CLB    Gaudette            Bill            GK     $       30,000.00   $         30,000.00\\n CLB    Gaven               Eddie           M      $      165,000.00   $        188,000.00\\n DAL    Gbandi              Chris           D      $      100,000.00   $        103,750.00\\n DAL    Gbandi              Sandy           M      $       12,900.00   $         12,900.00\\n  LA    Glinton             Gavin           F      $       50,000.00   $         50,000.00\\n  KC    Godbolt             Aaron John      M      $       17,700.00   $         17,700.00\\n  NY    Goldthwaite         Kevin           D      $       30,870.00   $         30,870.00\\n COL    Gomez               Hercules        F      $       49,350.00   $         49,350.00\\n  DC    Gomez               Cristian        M      $      216,000.00   $        218,500.00\\n CLB    Gonzalez            Marcos          D      $      156,000.00   $        162,250.00\\n  NE    Gonzalez            Miguel          M      $       12,900.00   $         12,900.00\\n DAL    Goodson             Clarence        D      $       48,378.75   $         53,378.75\\n  LA    Gordon              Alan            F      $       30,870.00   $         30,870.00\\n CLB    Grabavoy            Ned             M      $       45,050.25   $         52,550.25\\n  LA    Gray                Kelly           M-D    $       85,000.00   $         85,000.00\\n  DC    Gros                Joshua          M      $       72,500.00   $         75,000.00\\n CLB    Gruenebaum          Andy            GK     $       17,700.00   $         17,700.00\\n  KC    Guadarrama          Willy           F      $       12,900.00   $         12,900.00\\n CHI    Guerrero            Ivan            D-M    $      160,000.00   $        187,500.00\\n CHI    Gutierrez           Diego           M      $      126,500.00   $        126,500.00\\n CHV    Guzan               Brad            GK     $       52,237.50   $         67,237.50\\n TFC    Guzman              David           M      $       12,900.00   $         12,900.00\\n CHV    Hamilton            Anthony         F      $       17,700.00   $         17,700.00\\n  LA    Harden              Ty              D      $       30,000.00   $         30,000.00\\n  LA    Harmse              Kevin           M      $       40,800.00   $         40,800.00\\n  KC    Harrington          Michael         D      $       36,000.00   $         53,500.00\\n RSL    Harris              Atiba           F      $       30,000.00   $         30,000.00\\n  KC    Hartman             Kevin           GK     $      150,000.00   $        150,000.00\\n COL    Harvey              Jordan          D      $       17,700.00   $         17,700.00\\n RSL    Hashimoto           Duke            F      $       17,700.00   $         17,700.00\\n HOU    Hatzke              Nick            M      $       12,900.00   $         12,900.00\\n HOU    Hayden              John-Michael    M      $       17,700.00   $         17,700.00\\n  NE    Heaps               Jay             D      $      110,000.00   $        113,750.00\\n CLB    Hejduk              Frankie         D      $      150,000.00   $        175,000.00\\n  NE    Helton              Kyle            D      $       12,900.00   $         12,900.00\\n TFC    Hemming             Tyler           M      $       17,700.00   $         17,700.00\\n CLB    Hendrickson         Ezra            D-M    $       76,650.00   $         77,900.00\\n CHV    Hernandez           Jason           D      $       45,000.00   $         45,625.00\\n COL    Hernandez           Nicolas         F      $      130,000.00   $        132,400.00\\n CLB    Herron              Andy            F      $      140,000.00   $        148,750.00\\n CLB    Hesmer              William         GK     $       30,870.00   $         30,870.00\\n DAL    Hislop              Shaka           GK     $      220,800.00   $        220,800.00\\n HOU    Hoerner             Kenneth         M-F    $       12,900.00   $         12,900.00\\n  KC    Hohlbein            Aaron           M-D    $       30,000.00   $         30,000.00\\n HOU    Holden              Stuart          M      $       31,500.00   $         31,500.00\\n COL    Hughes              Justin          GK     $       12,900.00   $         12,900.00\\n CLB    Hunter              Ben             F      $       12,900.00   $         12,900.00\\n HOU    Ianni               Patrick         D      $       70,000.00   $        103,000.00\\n DAL    Ibrahim             Abdus           F      $       50,000.00   $         83,000.00\\n  NE    Igwe                Amaechi         F      $       45,000.00   $         78,000.00\\n\\nSource: Major League Soccer Players Union\\n\"                                                                                                                                                                                                                          \n[4] \"                   2007 MLS Player Salaries: August 31, 2007: Alphabetical\\n                                                          2007           2007 Guaranteed\\n Club   Last Name           First Name      Pos        Base Salary        Compensation\\n COL    Ihemelu             Ugo             D      $       55,000.00   $         55,000.00\\n  NY    Ikangu              Elie            M      $       17,700.00   $         17,700.00\\n HOU    James               Jordan          GK     $       12,900.00   $         12,900.00\\n HOU    Jaqua               Nate            F      $      112,500.00   $        119,525.00\\n  LA    Jazic               Ante            D-M    $      108,000.00   $        114,250.00\\n  KC    Jewsbury            Jack            M-F    $       50,000.00   $         50,000.00\\n RSL    Jimenez             Christian       M      $       33,075.00   $         43,075.00\\n  KC    John                Will            M-F    $       33,075.00   $         40,575.00\\n  NE    John                Avery           D      $       63,000.00   $         63,750.00\\n  KC    Johnson             Eddie           F      $      750,000.00   $        875,000.00\\n DAL    Jones               Scott           M      $       12,900.00   $         12,900.00\\n  LA    Jones               Cobi            M      $       95,000.00   $         95,000.00\\n  NE    Joseph              Shalrie         D      $      170,625.00   $        180,625.00\\n CLB    Junge               Ryan            D      $       12,900.00   $         12,900.00\\n CLB    Kamara              Kei             F      $       33,000.00   $         43,000.00\\n  NY    Karcz               Chris           M      $       12,900.00   $         12,900.00\\n COL    Keel                Stephen         D      $       17,700.00   $         17,700.00\\n COL    Kimura              Kosuke          M      $       12,900.00   $         12,900.00\\n RSL    Kipre               Jean-Martial    D      $       30,000.00   $         30,000.00\\n RSL    Kirby               Dustin          D      $       12,900.00   $         12,900.00\\n  LA    Kirk                Quavas          F      $       75,000.00   $        111,500.00\\n COL    Kirovski            Jovan           F      $      200,000.00   $        200,000.00\\n  LA    Klein               Chris           M      $      180,000.00   $        187,250.00\\n CHV    Kljestan            Sacha           M      $       70,000.00   $        103,000.00\\n  NE    Knighton            Brad            GK     $       12,900.00   $         12,900.00\\n  KC    Konopka             Chris           GK     $       12,900.00   $         12,900.00\\n RSL    Kotschau            Ritchie         D      $       69,300.00   $         70,175.00\\n  NY    Kovalenko           Dema            M      $      190,000.00   $        197,375.00\\n  DC    Kpene               Guy             F      $       30,000.00   $         30,000.00\\n  KC    Kraus               Michael         M-F    $       12,900.00   $         12,900.00\\n  KC    Kronberg            Eric            GK     $       30,000.00   $         30,000.00\\n COL    LaBrocca            Nick            M      $       12,900.00   $         12,900.00\\n RSL    Lancos              Chris           D      $       17,700.00   $         17,700.00\\n  NE    Larentowicz         Jeff            M      $       30,000.00   $         30,000.00\\n  NY    Laventure           Jerrod          F      $       12,900.00   $         12,900.00\\n  NY    Leitch              Chris           D      $       43,200.00   $         43,200.00\\n  NE    Leonard             Marshall        M      $       47,500.00   $         47,500.00\\n CHV    Llamosa             Carlos          D      $       84,000.00   $         84,000.00\\n  NE    Loftus              Chris           F      $       12,900.00   $         12,900.00\\n TFC    Lombardo            Andrea          F      $       30,000.00   $         30,000.00\\n CHV    Lopez               Rodrigo         M      $       17,700.00   $         17,700.00\\n  KC    Lowery              Amir            M      $       12,900.00   $         12,900.00\\n TFC    Lumley              Stephen         D      $       12,900.00   $         12,900.00\\n  NY    Magee               Mike            F      $       56,206.25   $         57,206.25\\n RSL    Mantilla            Matias          D      $       48,000.00   $         48,000.00\\n CHI    Mapp                Justin          M      $      130,000.00   $        136,000.00\\n  KC    Marinelli           Carlos          M      $      165,000.00   $        165,000.00\\n CHI    Marques             Bruno           M      $       12,900.00   $         12,900.00\\n CHV    Marsch              Jesse           M      $      100,000.00   $        109,375.00\\n CLB    Marshall            Chad            D      $      100,000.00   $        123,000.00\\n TFC    Marshall            Tyrone          D      $      142,000.00   $        149,500.00\\n  LA    Martino             Kyle            M      $       52,500.00   $         55,297.27\\n COL    Mastroeni           Pablo           M-D    $      280,000.00   $        298,000.00\\n\\nSource: Major League Soccer Players Union\\n\"                                                                                                                                                                                                                          \n[5] \"                   2007 MLS Player Salaries: August 31, 2007: Alphabetical\\n                                                          2007           2007 Guaranteed\\n Club   Last Name           First Name      Pos        Base Salary        Compensation\\n  NY    Mathis              Clint           M-F    $      270,000.00   $        410,000.00\\n DAL    McCarty             Dax             M      $       33,000.00   $         45,500.00\\n  KC    McMahen             Ryan            M      $       30,000.00   $         30,000.00\\n  DC    McTavish            Devon           M      $       30,000.00   $         30,000.00\\n  DC    Mediate             Stanton         M-F    $       30,000.00   $         30,000.00\\n TFC    Melo                Joey            M      $       12,900.00   $         12,900.00\\n  NY    Mendes              Carlos          D      $       62,606.25   $         62,606.25\\n CHV    Mendoza             Francisco       M      $       90,000.00   $         93,750.00\\n CHV    Merlin              Laurent         M      $       60,000.00   $         60,000.00\\n CLB    Miglioranzi         Stefani         M      $       70,008.00   $         86,258.00\\n DAL    Mina                Roberto         F      $       80,000.00   $         80,000.00\\n HOU    Moloi               Mpho            M      $       17,700.00   $         17,700.00\\n Pool   Monsalve            David           GK     $       30,000.00   $         30,000.00\\n CHI    Monteiro            Jerson          F      $       17,700.00   $         17,700.00\\n DAL    Moor                Drew            D      $       53,350.00   $         65,850.00\\n  DC    Moose               Justin          M      $       17,700.00   $         17,700.00\\n RSL    Morales             Javier          M      $      120,000.00   $        120,000.00\\n  DC    Moreno              Jaime           F      $      250,000.00   $        275,000.00\\n CLB    Moreno              Alejandro       F      $      120,000.00   $        125,000.00\\n  KC    Morsink             Kurt            M      $       30,000.00   $         30,000.00\\n CLB    Moss                Brandon         M      $       17,700.00   $         17,700.00\\n  KC    Movsisyan           Yura            F      $       35,750.00   $         45,750.00\\n HOU    Mullan              Brian           M      $      125,000.00   $        125,000.00\\n HOU    Mulrooney           Richard         M      $      220,000.00   $        233,200.00\\n  DC    Mupier              Mira            F      $       12,900.00   $         12,900.00\\n CHV    Myers               Justin          GK     $       12,900.00   $         12,900.00\\n CHV    Nagamura            Paulo           M      $       89,250.00   $         89,250.00\\n  DC    Namoff              Bryan           D      $       85,000.00   $         88,750.00\\n HOU    Ngwenya             Joseph          F      $       51,148.13   $         62,023.13\\n CHI    Noble               Nick            GK     $       12,900.00   $         12,900.00\\n  DC    Nolly               Jay             GK     $       36,000.00   $         36,000.00\\n  NE    Noonan              Pat             F      $      225,000.00   $        227,500.00\\n  DC    North               Brad            F      $       12,900.00   $         12,900.00\\n TFC    Nunez               Cristian        M      $       17,700.00   $         17,700.00\\n CHV    Nunez               Ramon           M      $      100,000.00   $        118,000.00\\n TFC    O'Brien             Ronnie          M      $      240,000.00   $        258,750.00\\n DAL    Oduro               Dominic         F      $       30,000.00   $         30,000.00\\n  NE    Oka                 Arsene          M      $       12,900.00   $         12,900.00\\n  DC    Olsen               Ben             M      $      155,000.00   $        177,500.00\\n HOU    Onstad              Pat             GK     $      168,000.00   $        168,000.00\\n CLB    O'Rourke            Danny           M      $       46,331.25   $         56,331.25\\n COL    Osorno              Daniel          F      $      138,000.00   $        143,000.00\\n CLB    Oughton             Duncan          D      $       72,000.00   $         72,000.00\\n Pool   Pardo               Boris           GK     $       17,700.00   $         17,700.00\\n  NY    Parke               Jeff            D      $       47,250.00   $         48,500.00\\n  NE    Parkhurst           Michael         D      $       80,575.00   $         93,075.00\\n  NY    Patterson           Randi           F      $       12,900.00   $         12,900.00\\n CHI    Pause               Logan           M      $       69,300.00   $         69,300.00\\n  LA    Pavon               Carlos          F      $      132,000.00   $        141,500.00\\n DAL    Pereira             Ricardo         F      $       30,000.00   $         30,000.00\\n CHV    Perez               Orlando         D      $       70,000.00   $         70,000.00\\n  DC    Perkins             Troy            GK     $       85,000.00   $         87,500.00\\n CLB    Peterson            Andrew          M      $       12,900.00   $         12,900.00\\n\\nSource: Major League Soccer Players Union\\n\"                                                                                                                                                                                                                          \n[6] \"                   2007 MLS Player Salaries: August 31, 2007: Alphabetical\\n                                                            2007            2007 Guaranteed\\n Club   Last Name           First Name         Pos       Base Salary         Compensation\\n COL    Peterson            Jacob              F     $        70,000.00   $          88,750.00\\n COL    Petke               Mike               D     $       126,000.00   $         126,000.00\\n CHI    Pickens             Matt               GK    $        32,340.00   $          32,340.00\\n CLB    Pierce              Rusty              D     $        63,000.00   $          64,300.00\\n DAL    Pitchkolan          Aaron              M     $        17,700.00   $          17,700.00\\n CHI    Plotkin             Brian              M     $        30,000.00   $          30,000.00\\n RSL    Pope                Eddie              D     $       265,000.00   $         265,000.00\\n  KC    Pore                Ryan               F     $        44,825.00   $          57,325.00\\n TFC    Pozniak             Chris              D     $        90,000.00   $          95,000.00\\n COL    Prideaux            Brandon            D     $        76,403.00   $          76,403.00\\n  NY    Quaranta            Santino            F     $       100,000.00   $         105,312.50\\n  NE    Ralston             Steve              M     $       150,000.00   $         150,000.00\\n  LA    Randolph            Michael            D     $        17,700.00   $          17,700.00\\n  KC    Raybould            Ryan               D-M   $        30,000.00   $          30,000.00\\n CHV    Razov               Ante               F     $       245,000.00   $         248,750.00\\n TFC    Reda                Marco              D     $       100,000.00   $         105,000.00\\n  NE    Reis                Matt               GK    $       150,000.00   $         150,000.00\\n  NY    Reyna               Claudio            M     $     1,000,008.00   $       1,250,008.00\\n RSL    Reynish             Kyle               GK    $        17,700.00   $          17,700.00\\n Pool   Reynolds            Samuel             GK    $        17,700.00   $          17,700.00\\n DAL    Rhine               Bobby              D     $        60,000.00   $          62,500.00\\n DAL    Ricchetti           Pablo              M     $       120,000.00   $         126,625.00\\n  NY    Richards            Dane               F-M   $        30,000.00   $          30,000.00\\n  NE    Riley               James              D-F   $        30,870.00   $          30,870.00\\n RSL    Rimando             Nick               GK    $        64,125.00   $          68,468.75\\n  LA    Roberts             Troy               D     $        30,000.00   $          30,000.00\\n CHI    Robinson            Dasan              D     $        42,500.00   $          42,500.00\\n HOU    Robinson            Eddie              D     $       110,000.00   $         110,000.00\\n TFC    Robinson            Carl               M     $       300,000.00   $         315,000.00\\n CHV    Robles              Eder               D     $        12,900.00   $          12,900.00\\n CLB    Rogers              Robbie             F-M   $        50,000.00   $          50,000.00\\n CHI    Rolfe               Chris              F     $        70,000.00   $          74,700.00\\n DAL    Ruiz                Carlos             F     $       325,000.00   $         435,000.00\\n CHI    Russolillo          Jordan             D     $        12,900.00   $          12,900.00\\n DAL    Sala                Dario              GK    $       110,000.00   $         119,875.00\\n TFC    Samuel              Collin             F     $        90,000.00   $         115,000.00\\n COL    Sanneh              Tony               D     $        60,000.00   $          60,000.00\\n DAL    Saragosa            Marcelo            M     $        67,008.00   $          71,883.00\\n CLB    Schelotto           Guillermo Barros   F     $       150,000.00   $         150,000.00\\n Pool   Schoeni             Kenny              GK    $        17,700.00   $          17,700.00\\n  NY    Schopp              Markus             M     $       175,000.00   $         175,000.00\\n  KC    Sealy               Scott              F     $        33,075.00   $          33,075.00\\n CHI    Segares             Gonzalo            D     $        48,300.00   $          50,800.00\\n RSL    Seitz               Chris              GK    $        55,000.00   $          90,500.00\\n DAL    Serioux             Adrian             D     $       108,000.00   $         120,500.00\\n  LA    Sesay               Israel             F     $        45,000.00   $          57,083.33\\n  DC    Simms               Clyde              M     $        52,500.00   $          53,750.00\\n  NE    Sims                Willie             F     $        35,500.00   $          43,000.00\\n  NE    Smith               Khano              F     $        44,100.00   $          44,100.00\\n  NE    Solle               Ryan               M     $        17,700.00   $          17,700.00\\n CHV    Solorzano           Erasmo             M     $        12,900.00   $          12,900.00\\n CHI    Soumare             Bakary             D     $        45,000.00   $          78,000.00\\n TFC    Stamatopolus        Kenny              GK    $        30,000.00   $          37,500.00\\n\\nSource: Major League Soccer Players Union\\n\"\n[7] \"                   2007 MLS Player Salaries: August 31, 2007: Alphabetical\\n                                                          2007           2007 Guaranteed\\n Club   Last Name           First Name      Pos        Base Salary        Compensation\\n  NY    Stammler            Seth            D      $       30,870.00   $         30,870.00\\n RSL    Stewart             Jack            D      $       41,081.25   $         48,581.25\\n RSL    Sturgis             Nathan          M      $       70,000.00   $        103,000.00\\n CHV    Suarez              Claudio         D      $      146,991.60   $        146,991.60\\n TFC    Sutton              Greg            GK     $      125,000.00   $        132,562.50\\n CLB    Szetela             Danny           M      $       43,135.31   $         48,760.31\\n RSL    Talley              Carey           D      $      118,248.00   $        118,248.00\\n CHI    Telesford           Osei            D      $       36,000.00   $         36,625.00\\n CLB    Thomas              Jacob           M      $       84,000.00   $         87,750.00\\n CHV    Thomas              Shavar          D      $       70,000.00   $         73,750.00\\n DAL    Thompson            Abe             F      $       30,000.00   $         30,000.00\\n  NE    Thompson            Wells           M      $       30,000.00   $         30,000.00\\n COL    Thornton            Zach            GK     $       57,600.00   $         57,600.00\\n DAL    Toja                Juan Carlos     M      $      100,008.00   $        100,008.00\\n  LA    Tudela              Josh            M      $       17,700.00   $         17,700.00\\n  NE    Twellman            Taylor          F      $      325,008.00   $        350,008.00\\n  NY    Ubiparipovic        Sinisa          F-M    $       17,700.00   $         17,700.00\\n HOU    Ustruck             Erik            M      $       12,900.00   $         12,900.00\\n  LA    Vagenas             Peter           M      $      131,250.00   $        131,875.00\\n  NY    Van Den Bergh       Dave            M      $      180,000.00   $        214,583.33\\n  DC    Vanney              Greg            D      $      216,667.00   $        236,667.00\\n CHV    Vaughn              Lawson          D      $       30,000.00   $         30,000.00\\n  LA    Veris               Kyle            D      $       17,700.00   $         17,700.00\\n  KC    Victorine           Sasha           M      $      137,500.00   $        140,000.00\\n  NY    Vide                Joe             M      $       17,700.00   $         17,700.00\\n CLB    Virtuoso            Ricardo         M      $       60,000.00   $        102,000.00\\n DAL    Wagenfuhr           David           D      $       30,870.00   $         30,870.00\\n DAL    Wagner              Blake           D      $       33,000.00   $         45,500.00\\n  KC    Wahl                Tyson           D      $       30,000.00   $         30,000.00\\n HOU    Waibel              Craig           D      $       85,000.00   $         85,000.00\\n  DC    Walker              Jamil           M-F    $       30,870.00   $         30,870.00\\n DAL    Wallace             Anthony         M      $       45,000.00   $         78,000.00\\n CHI    Wanchope            Paulo           F      $      240,000.00   $        267,500.00\\n CLB    Ward                Tim             D      $       38,456.25   $         48,456.25\\n  NE    Warren              Doug            GK     $       50,000.00   $         50,000.00\\n COL    Wasson              Daniel          D      $       17,700.00   $         17,700.00\\n  NY    Waterreus           Ronald          GK     $      200,000.00   $        200,000.00\\n  KC    Watson              Lance           M      $       17,700.00   $         17,700.00\\n RSL    Watson              Jamie           F      $       45,100.00   $         50,100.00\\n HOU    Wells               Zachary         GK     $       50,400.00   $         50,400.00\\n TFC    Welsh               Andrew          M      $      195,000.00   $        204,750.00\\n RSL    Williams            Andy            F      $       70,008.00   $         70,008.00\\n COL    Wilmes              Clifton         D      $       12,900.00   $         12,900.00\\n RSL    Wingert             Chris           D      $       54,993.75   $         62,493.75\\n  NY    Wolyniec            John            F      $       65,625.00   $         65,625.00\\n HOU    Wondolowski         Chris           M      $       30,000.00   $         30,000.00\\n CHI    Woolard             Daniel          D      $       12,900.00   $         12,900.00\\n TFC    Wynne               Marvell         D      $       47,500.00   $        150,000.00\\n  LA    Xavier              Abel            D      $      156,000.00   $        156,000.00\\n DAL    Yi                  Alex            D      $       30,870.00   $         30,870.00\\n  KC    Zavagnin            Kerry           M      $      154,000.00   $        154,000.00\\n CLB    Zayner              Jed             D      $       33,000.00   $         40,500.00\\n CHV    Zotinca             Alex            D      $       67,500.00   $         68,750.00\\n\\nSource: Major League Soccer Players Union\\n\""
  },
  {
    "objectID": "02-pts-salary.html",
    "href": "02-pts-salary.html",
    "title": "Points vs salaries",
    "section": "",
    "text": "This notebook is a work in progress. There are no particular findings at this time.\n\nDoes spending more on players ensure a better season? I want to compare season points to salaries spent by MLS teams.\nI thought I had found some standings data on kaggle, but it only goes through part of 2021.\nI worked it out using 2020 data, but there is nothing to really show."
  },
  {
    "objectID": "02-pts-salary.html#goal-of-this-notebook",
    "href": "02-pts-salary.html#goal-of-this-notebook",
    "title": "Points vs salaries",
    "section": "",
    "text": "This notebook is a work in progress. There are no particular findings at this time.\n\nDoes spending more on players ensure a better season? I want to compare season points to salaries spent by MLS teams.\nI thought I had found some standings data on kaggle, but it only goes through part of 2021.\nI worked it out using 2020 data, but there is nothing to really show."
  },
  {
    "objectID": "02-pts-salary.html#setup",
    "href": "02-pts-salary.html#setup",
    "title": "Points vs salaries",
    "section": "Setup",
    "text": "Setup\n\nlibrary(tidyverse)\nlibrary(janitor)\noptions(dplyr.summarise.inform = FALSE)"
  },
  {
    "objectID": "02-pts-salary.html#download",
    "href": "02-pts-salary.html#download",
    "title": "Points vs salaries",
    "section": "Download",
    "text": "Download\nI scraped the MLS 2023 standings and put them in a Google Sheet where I hand-edited some columns to clean it up. (It was just quicker because of some non-consisten patterns in the scrapped team name.)\n\ndownload.file(\"https://docs.google.com/spreadsheets/d/e/2PACX-1vQwM9NKGZEc5CKVR2z7IoEUq0nij77xNu6kz8Rua4JFNfqt0sOe5RaE8gwW2lZ0nSsAFH5aCNUQJrcV/pub?output=csv\", \"data-raw/mls-standings-2023.csv\")\n\nI haven’t used this as of yet."
  },
  {
    "objectID": "02-pts-salary.html#importing",
    "href": "02-pts-salary.html#importing",
    "title": "Points vs salaries",
    "section": "Importing",
    "text": "Importing\n\nmls_standings &lt;- read_csv(\"data-raw/all_tables.csv\") |&gt; clean_names()\nmls_salaries &lt;- read_rds(\"data-processed/mls-salaries.rds\")\nmls_standings_2023 &lt;- read_csv(\"https://docs.google.com/spreadsheets/d/e/2PACX-1vQwM9NKGZEc5CKVR2z7IoEUq0nij77xNu6kz8Rua4JFNfqt0sOe5RaE8gwW2lZ0nSsAFH5aCNUQJrcV/pub?output=csv\")"
  },
  {
    "objectID": "02-pts-salary.html#salaries",
    "href": "02-pts-salary.html#salaries",
    "title": "Points vs salaries",
    "section": "Salaries",
    "text": "Salaries\nStarting with salaries data since this is “cleaned” already.\n\nsal_20 &lt;- mls_salaries |&gt; \n  filter(year == \"2020\") |&gt; \n  group_by(club_long, conference) |&gt; \n  summarise(team_salary = sum(compensation))\n\nsal_20"
  },
  {
    "objectID": "02-pts-salary.html#standings",
    "href": "02-pts-salary.html#standings",
    "title": "Points vs salaries",
    "section": "Standings",
    "text": "Standings\nChecking what we have for standings data.\n\nmls_standings |&gt; \n  summarise(\n    yr_old = min(year),\n    yr_new = max(year)\n  )"
  },
  {
    "objectID": "02-pts-salary.html#trying-this-with-2020-anyway",
    "href": "02-pts-salary.html#trying-this-with-2020-anyway",
    "title": "Points vs salaries",
    "section": "Trying this with 2020 anyway",
    "text": "Trying this with 2020 anyway\n\nPeek at the data\n\nstd_20 &lt;- mls_standings |&gt; filter(year == \"2020\")\n\n\n\nCleaning names\nThere are some issues here with team names. There are notes on the names and some names are different than what is used with MLS Salaries.\n\nstd_20_clean &lt;- mls_standings |&gt; \n  filter(year == \"2020\", conference == \"Overall\") |&gt; \n  mutate(\n    team_clean = str_remove_all(team, regex(\"\\\\[.\\\\]|\\\\(.\\\\)\")) |&gt; str_trim(),\n    team_new = case_match(\n      team_clean,\n      \"Columbus Crew SC\" ~ \"Columbus Crew\",\n      \"Houston Dynamo\" ~ \"Houston Dynamo FC\",\n      \"Los Angeles FC\" ~ \"LAFC\",\n      \"Vancouver Whitecaps FC\" ~ \"Vancouver Whitecaps\",\n      .default = team_clean\n    )\n  ) |&gt;\n  arrange(team_new) |&gt; \n  distinct(team_new, pts)\n\n\nstd_20_clean"
  },
  {
    "objectID": "02-pts-salary.html#put-them-together",
    "href": "02-pts-salary.html#put-them-together",
    "title": "Points vs salaries",
    "section": "Put them together",
    "text": "Put them together\n\ncombined_20 &lt;- sal_20 |&gt; \n  left_join(std_20_clean, by = join_by(club_long == team_new)) |&gt; \n  drop_na()\n\ncombined_20"
  },
  {
    "objectID": "02-pts-salary.html#plot-the-relationship",
    "href": "02-pts-salary.html#plot-the-relationship",
    "title": "Points vs salaries",
    "section": "Plot the relationship",
    "text": "Plot the relationship\n\nggplot(combined_20) +\n  aes(x = pts, y = team_salary) +\n  geom_point(aes(color = conference), size = 4) +\n  # geom_text(aes(label = club_long)) +\n  ggrepel::geom_text_repel(aes(label = club_long), size = 3)\n\n\n\n\n\n\n\n\nThere isn’t one, really. At least not for this year. It’s also difficult to read."
  },
  {
    "objectID": "02-analysis.html",
    "href": "02-analysis.html",
    "title": "Analysis 2024",
    "section": "",
    "text": "Important\n\n\n\nThe most recent data for this analysis was released in May 2024. The MLS will update salaries again after the summer transfer window, usually in September.\n\n\nWe’ll explore MLS Salaries through history. We’ll start with the most recent data, then look back historically. A couple of questions that come to mind:\n\nWhich players are getting paid the most this year?\nWhich teams have the highest salary bill this year?\nHow do team salary rankings compare over time?\n\nPer the MLS Player’s Association, “compensation” is: The Annual Average Guaranteed Compensation (Guaranteed Comp) number includes a player’s base salary and all signing and guaranteed bonuses annualized over the term of the player’s contract, including option years."
  },
  {
    "objectID": "02-analysis.html#goals-of-this-notebook",
    "href": "02-analysis.html#goals-of-this-notebook",
    "title": "Analysis 2024",
    "section": "",
    "text": "Important\n\n\n\nThe most recent data for this analysis was released in May 2024. The MLS will update salaries again after the summer transfer window, usually in September.\n\n\nWe’ll explore MLS Salaries through history. We’ll start with the most recent data, then look back historically. A couple of questions that come to mind:\n\nWhich players are getting paid the most this year?\nWhich teams have the highest salary bill this year?\nHow do team salary rankings compare over time?\n\nPer the MLS Player’s Association, “compensation” is: The Annual Average Guaranteed Compensation (Guaranteed Comp) number includes a player’s base salary and all signing and guaranteed bonuses annualized over the term of the player’s contract, including option years."
  },
  {
    "objectID": "02-analysis.html#setup",
    "href": "02-analysis.html#setup",
    "title": "Analysis 2024",
    "section": "Setup",
    "text": "Setup\n\nlibrary(tidyverse)\nlibrary(janitor)\nlibrary(scales)\nlibrary(ggrepel)\nlibrary(DT)"
  },
  {
    "objectID": "02-analysis.html#import",
    "href": "02-analysis.html#import",
    "title": "Analysis 2024",
    "section": "Import",
    "text": "Import\nGetting the cleaned data.\n\nsalaries &lt;- read_rds(\"data-processed/mls-salaries.rds\")\n\nsalaries |&gt; glimpse()\n\nRows: 11,249\nColumns: 9\n$ year         &lt;chr&gt; \"2007\", \"2007\", \"2007\", \"2007\", \"2007\", \"2007\", \"2007\", \"…\n$ club_short   &lt;chr&gt; \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"…\n$ last_name    &lt;chr&gt; \"Armas\", \"Banner\", \"Barrett\", \"Blanco\", \"Brown\", \"Busch\",…\n$ first_name   &lt;chr&gt; \"Chris\", \"Michael\", \"Chad\", \"Cuauhtemoc\", \"C.J.\", \"Jon\", …\n$ position     &lt;chr&gt; \"M\", \"M\", \"F\", \"F\", \"D\", \"GK\", \"F\", \"D\", \"M\", \"D\", \"D\", \"…\n$ base_salary  &lt;dbl&gt; 225000.0, 12900.0, 41212.5, 2492316.0, 106391.0, 58008.0,…\n$ compensation &lt;dbl&gt; 225000.0, 12900.0, 48712.5, 2666778.0, 106391.0, 58008.0,…\n$ club_long    &lt;chr&gt; \"Chicago Fire FC\", \"Chicago Fire FC\", \"Chicago Fire FC\", …\n$ conference   &lt;chr&gt; \"Eastern\", \"Eastern\", \"Eastern\", \"Eastern\", \"Eastern\", \"E…\n\n\n\nSetting the most recent year of data\nI’m creating an object called recent_year because at some point I’ll have new data and might want to just change the year.\n\nrecent_year &lt;- \"2024\""
  },
  {
    "objectID": "02-analysis.html#players-with-highest-salaries",
    "href": "02-analysis.html#players-with-highest-salaries",
    "title": "Analysis 2024",
    "section": "Players with highest salaries",
    "text": "Players with highest salaries\n\nOver all time\nA searchable table of all players, all time.\n\nsal_high &lt;- salaries |&gt; \n  arrange(compensation |&gt; desc()) |&gt; \n  select(!c(club_long, conference))\n\nsal_high |&gt; datatable()\n\nWarning in instance$preRenderHook(instance): It seems your data is too big for\nclient-side DataTables. You may consider server-side processing:\nhttps://rstudio.github.io/DT/server.html\n\n\n\n\n\n\n\nData takeaway: Messi money\nUpon his signing on July 15, 2023, Lionel Messi became the highest paid player in the history of the MLS with a total compensation of $20.4 million. Lorenzo Insigne of Toronto was second at $15.5 million, the only other player earning more than $10 million within a year.\n\n\n\nIn most recent year\n\nsal_high_recent &lt;- salaries |&gt; \n  filter(year == recent_year) |&gt; \n  mutate(rank = min_rank(desc(compensation))) |&gt; \n  relocate(rank) |&gt; \n  arrange(compensation |&gt; desc()) |&gt; \n  select(!c(club_long, conference))\n\nsal_high_recent\n\n\n  \n\n\n\nTeams with more than one player from top 10\n\nsal_high_recent |&gt; \n  filter(rank &lt;= 10) |&gt; \n  count(club_short, sort = T)\n\n\n  \n\n\n\n\nData takeaway: Driussi 5th in early 2024\nFor the early 2024 release, Austin FC’s Sebastián Driussi is the 5th highest player in the MLS and Houston’s Hector Herrera is the 8th highest-paid player.\nBoth Inter Miami and Toronto FC have two top 10 earners on their rosters.\n\n\n\nDifference with just base pay in 2024?\nThis looks at just the base salary as opposed to total compensation. No great changes at the top of the list.\n\nsal_high_base &lt;- salaries |&gt; \n  arrange(base_salary |&gt; desc()) |&gt; \n  select(!c(club_long, conference, compensation))\n\nsal_high_base |&gt; filter(year == recent_year, base_salary &gt;= 2000000)"
  },
  {
    "objectID": "02-analysis.html#team-salaries",
    "href": "02-analysis.html#team-salaries",
    "title": "Analysis 2024",
    "section": "Team salaries",
    "text": "Team salaries\nWe’ll get per-year salaries by team, then look at just this year.\n\nHighest team salaries over time\nFirst get the total compensation for each team in each year.\n\nsal_team &lt;- salaries |&gt; \n  group_by(year, club_long) |&gt; \n  summarise(total_compensation = sum(compensation)) |&gt; \n  arrange(total_compensation |&gt; desc())\n\n`summarise()` has grouped output by 'year'. You can override using the\n`.groups` argument.\n\n# peek at the top\nsal_team |&gt; filter(total_compensation &gt; 20000000)\n\n\n  \n\n\n\nThen find the top team for each year.\n\ntop_sal_team_yr &lt;- salaries |&gt; \n  group_by(year, club_long) |&gt; \n  summarise(total_compensation = sum(compensation)) |&gt; \n  slice_max(total_compensation)\n\ntop_sal_team_yr\n\n\n  \n\n\n\nAnd note how often the teams have been the top spender.\n\ntop_sal_team_yr |&gt; \n  ungroup() |&gt; \n  tabyl(club_long) |&gt; \n  adorn_totals(\"row\") |&gt;\n  adorn_pct_formatting() |&gt; \n  as_tibble()\n\n\n  \n\n\n\n\nData takeaways: Toronto historically spends high\nLooking at the most expensive rosters in the MLS of time, Toronto FC has six of the top 10 highest entries. Over the past 17 years, Toronto has been the top spending team seven times, or 40% of the time. The L.A. Galaxy is next with five highest-spending years.\n\n\n\nHighest salaries this year\nAnd let’s look at this year.\n\nsal_team_recent &lt;- sal_team |&gt; filter(year == recent_year)\n\n# peek\nsal_team_recent |&gt; head(10)\n\n\n  \n\n\n\nLet’s round the numbers for our chart.\n\nsal_team_recent_mil &lt;- sal_team_recent |&gt; \n  mutate(total_millions = (total_compensation / 1000000) |&gt; round(1))\n\nsal_team_recent_mil\n\n\n  \n\n\n\nLet’s chart this\n\nsal_team_recent_mil_plot &lt;- sal_team_recent_mil |&gt; \n  filter(club_long != \"Major League Soccer\") |&gt; \n  ggplot(mapping = aes(\n    x = total_millions,\n    y = club_long |&gt; reorder(total_compensation)\n  )) +\n  geom_bar(stat='identity') +\n  geom_text(aes(label = paste(\"$\", as.character(total_millions), sep = \"\")), color = \"white\", hjust = 1.25) +\n  scale_x_continuous(labels = label_dollar()) +\n  labs(\n    x = \"Total team spending in $ millions\",\n    y = \"\",\n    title = \"Messi makes Miami top MLS spender in 2023\",\n    subtitle = str_wrap(\"Salaries includes each player's base salary plus all signing and guaranteed bonuses annualized over the term of the player's contract, including option years.\"),\n    caption = \"By: Christian McDonald. Source: Major League Soccer Players Association\"\n  ) +\n    theme_minimal()\n\n\nggsave(\"figures/team-salary-recent.png\")\n\nSaving 7 x 5 in image\n\n\n\nOne more look to see how many high-paid players on each team.\n\nsal_high_recent |&gt; \n  filter(compensation &gt;= 5000000) |&gt; \n  count(club_short, sort = T)\n\n\n  \n\n\n\n\nData Takeaway: Miami, Toronto tops\nGiven the historic signing of Lionel Messi in 2023, it is no surprise that Inter Miami have the highest team salary for the 2024 season. Toronto ranks second on the power of having two players making over $5 million, Lorenzo Insigne and Federico Bernardeschi.\n\n\n\nTeam spending over time\nLet’s look at team spending over the past five years. To do this, we have to create a ranking for the spending.\n\nI’m removing players not affiliated with teams\nWhen I added a third column to the group because I wanted to use long names for something, the ranking broke. I had to break the group then use the .by argument for rank().\n\n\nsal_team_rank &lt;- salaries |&gt; \n  filter(club_short != \"MLS\" | club_short |&gt; is.na()) |&gt; \n  group_by(year, club_short, club_long) |&gt; \n  summarise(\n    total_comp = sum(compensation, na.rm = TRUE)\n  ) |&gt; \n  arrange(year, total_comp |&gt; desc()) |&gt; \n1  ungroup() |&gt;\n2  mutate(rank = rank(-total_comp), .by = year)\n\n\n1\n\nI break the group_by here.\n\n2\n\nThen I set the ranking to work by year.\n\n\n\n\n`summarise()` has grouped output by 'year', 'club_short'. You can override\nusing the `.groups` argument.\n\n# peek\nsal_team_rank |&gt; head(20)\n\n\n  \n\n\n\nVisualizing all of them would be tricky. Let’s do the top five over last five years.\n\nsal_team_rank_top &lt;- sal_team_rank |&gt; \n  filter(rank &lt;= 5,\n         year &gt;= (as.numeric(recent_year) - 4))\n\nsal_team_rank_top\n\n\n  \n\n\n\nPeek at this a different way\n\nsal_team_rank_top |&gt; \n  select(-total_comp) |&gt; \n  pivot_wider(names_from = year, values_from = rank)\n\n\n  \n\n\n\n\n\nLet’s visualze spending rank\n\nThis has to be adjusted when new data is added.\n\nI want to use a list of team-specific colors. I’m trying this manually first, based on the results of the chart. The colors were pulled from here, though I wish I could instead join with a data package and pull from the team colors, but I haven’t found one that is up-to-date.\n\nsal_team_rank_top |&gt; count(club_short)\n\n\n  \n\n\nclub_color_list &lt;- c(\n  \"#80000A\", # ATL\n  \"#7CCDEF\", # CHI\n  \"#FE5000\", # CIN or 003087\n  \"#FEDD00\", # CLB\n  \"#00245D\", # LA\n  \"#C39E6D\", # LAFC\n  \"#F7B5CD\", # MIA\n  \"#CE0E2D\", # NE\n  \"#ECE83A\", #NSH\n  # \"#5D9741\", # SEA\n  \"#B81137\" # TOR\n  # \"#EF3E42\" # DC\n  # \"#00B140\", # AUS\n)\n\nAnd now the chart\n\nsal_team_rank_top_plot &lt;- sal_team_rank_top |&gt; \n  # filter()\n  ggplot(aes(x=year, y=rank, group = club_short)) +\n  geom_line(aes(color = club_short)) +\n  geom_point(aes(color = club_short, size = 3)) +\n  geom_label_repel(aes(label = club_short), size = 3) +\n  scale_y_reverse() +\n  scale_colour_manual(values = club_color_list) +\n  scale_size_continuous(guide = \"none\") +\n  labs(\n    title = \"Miami's spending was increasing before Messi\",\nsubtitle = str_wrap(\"The L.A. Galaxy are the only MLS team to rank as a top five spender in each of the past five years.\"),\n    color = \"Club\",\n    x = NULL,\n    y = \"Spending Rank\",\n    caption = \"By: Christian McDonald. Source: Major League Soccer Players Association\"\n  ) +\n  theme_minimal() +\n  guides(color = FALSE)\n\nWarning: The `&lt;scale&gt;` argument of `guides()` cannot be `FALSE`. Use \"none\" instead as\nof ggplot2 3.3.4.\n\n# sal_team_rank_top_plot\n\nggsave(\"figures/sal_team_rank.png\")\n\nSaving 7 x 5 in image\n\n\n\nLet’s count how many times each team is in this list.\n\nsal_team_rank_top |&gt; \n  count(club_long, sort = T)\n\n\n  \n\n\n\n\nData Takeaway: Miami and LA\nAmong the teams spending the most on their rosters over the past five years, Miami has ranked in the top five each year. The LA Galaxy and Toronto FC have been top spenders in four of the last five years."
  },
  {
    "objectID": "explore-api.html",
    "href": "explore-api.html",
    "title": "API explore",
    "section": "",
    "text": "Here I’m trying out different API products to use with MLS Salaries\nlibrary(tidyverse)\nlibrary(janitor)\nlibrary(usfootballR)\nlibrary(teamcolors)\nlibrary(scales)"
  },
  {
    "objectID": "explore-api.html#import",
    "href": "explore-api.html#import",
    "title": "API explore",
    "section": "Import",
    "text": "Import\n\nGetting our data\n\nsalaries &lt;- read_rds(\"data-processed/mls-salaries.rds\")\n\nsalaries |&gt; glimpse()\n\nRows: 11,249\nColumns: 9\n$ year         &lt;chr&gt; \"2007\", \"2007\", \"2007\", \"2007\", \"2007\", \"2007\", \"2007\", \"…\n$ club_short   &lt;chr&gt; \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"CHI\", \"…\n$ last_name    &lt;chr&gt; \"Armas\", \"Banner\", \"Barrett\", \"Blanco\", \"Brown\", \"Busch\",…\n$ first_name   &lt;chr&gt; \"Chris\", \"Michael\", \"Chad\", \"Cuauhtemoc\", \"C.J.\", \"Jon\", …\n$ position     &lt;chr&gt; \"M\", \"M\", \"F\", \"F\", \"D\", \"GK\", \"F\", \"D\", \"M\", \"D\", \"D\", \"…\n$ base_salary  &lt;dbl&gt; 225000.0, 12900.0, 41212.5, 2492316.0, 106391.0, 58008.0,…\n$ compensation &lt;dbl&gt; 225000.0, 12900.0, 48712.5, 2666778.0, 106391.0, 58008.0,…\n$ club_long    &lt;chr&gt; \"Chicago Fire FC\", \"Chicago Fire FC\", \"Chicago Fire FC\", …\n$ conference   &lt;chr&gt; \"Eastern\", \"Eastern\", \"Eastern\", \"Eastern\", \"Eastern\", \"E…\n\n\nI need to make some data to use\n\nsal_team &lt;- salaries |&gt; \n  group_by(year, club_long) |&gt; \n  summarise(total_compensation = sum(compensation)) |&gt; \n  arrange(total_compensation |&gt; desc())\n\n`summarise()` has grouped output by 'year'. You can override using the\n`.groups` argument.\n\nsal_team_rank &lt;- salaries |&gt; \n  filter(club_short != \"MLS\" | club_short |&gt; is.na()) |&gt; \n  group_by(year, club_short, club_long) |&gt; \n  summarise(\n    total_comp = sum(compensation, na.rm = TRUE)\n  ) |&gt; \n  arrange(year, total_comp |&gt; desc()) |&gt; \n  ungroup() |&gt;\n  mutate(rank = rank(-total_comp), .by = year)\n\n`summarise()` has grouped output by 'year', 'club_short'. You can override\nusing the `.groups` argument.\n\nsal_team_rank_top &lt;- sal_team_rank |&gt; \n  filter(rank &lt;= 5,\n         year &gt;= \"2019\")"
  },
  {
    "objectID": "explore-api.html#usfootballr",
    "href": "explore-api.html#usfootballr",
    "title": "API explore",
    "section": "usfootballr",
    "text": "usfootballr\nHere I try to use the colors from the usfootballr package and apply them to a chart.\nHere is what comes from the package for teams:\n\nespn_teams &lt;- espn_mls_teams()\n\nespn_teams |&gt; head()\n\n\n  \n\n\n\nNow I want to use my ranking data to try and color bars based on data from the package.\n\nsal_top_2023 &lt;- sal_team_rank |&gt; left_join(espn_teams, join_by(club_short == abbreviation)) |&gt; \n  select(1:4, 11:12) |&gt; \n  filter(year == \"2023\")\n\nsal_top_2023_col &lt;- sal_top_2023 |&gt; \n  mutate(color = paste(\"#\", color, sep = \"\"),\n         alternate_color = paste(\"#\", alternate_color, sep = \"\")\n        ) |&gt; \n  drop_na()\n\nsal_top_2023_col\n\n\n  \n\n\n\nNow to plot with the color?\nThe geom_text label I was trying below needed a decimal point and not as much rounding, but I’m not going to figure that out right now.\n\nsal_top_2023_col_plot &lt;- sal_top_2023_col |&gt; \n  ggplot(aes(x = reorder(club_short, total_comp), y = total_comp)) +\n  # geom_col(color = sal_top_2023_col$color, fill = sal_top_2023_col$alternate_color) +\n  geom_col(fill = sal_top_2023_col$color) +\n  scale_y_continuous(labels = label_dollar(scale = .000001, accuracy = 2),\n                     limits = c(0, 40000000)) +\n  # geom_text(aes(\n  #   label = dollar(total_comp, scale = .000001, accuracy = 3, digits = 2), hjust = -.25)\n  # ) +\n  coord_flip() +\n  labs(\n    title = \"Top five spending teams 2023\",\n    y = \"Total spending in $ millions\",\n    x = \"\"\n  ) \n\nggsave(\"figures/team-salary-2023-color.png\")\n\nSaving 7 x 5 in image\n\n\n\nWhile this works and they have all the current teams, in some cases we would want the alternative color for a team if the main color is black or white.\n\nFrom teamcolors\nWe’ll try this, but from older data because they won’t have some teams.\n\nmls_colors &lt;- teamcolors |&gt; filter(league == \"mls\") |&gt; \n  select(1, 3:4)\n\nmls_colors_udpated &lt;- mls_colors |&gt; \n  mutate(club_long = recode(\n    name,\n    \"Chicago Fire\" = \"Chicago Fire FC\"\n  )) |&gt; select(-name)\n\nsal_team_2019 &lt;- sal_team |&gt; filter(year == 2019) |&gt;\n  left_join(mls_colors_udpated, join_by(club_long)) |&gt; \n1  drop_na(primary, secondary)\n\n\nsal_team_2019\n\n\n1\n\nI had to drop rows that didn’t have their color or this would break.\n\n\n\n\n\n  \n\n\n\n\nsal_team_2019  |&gt; \n  # drop_na(primary, secondary) |&gt; \n  ggplot(aes(y = club_long |&gt; reorder(total_compensation), x = total_compensation)) +\n  geom_col(fill = sal_team_2019$primary) +\n  scale_x_continuous(labels = label_dollar(scale = .00001, accuracy = 2)) +\n  geom_text(aes(\n    label = dollar(total_compensation, scale = .00001, accuracy = 2, digits = 3)),\n    color = \"white\", hjust = 1.25\n  ) +\n  labs(\n    title = \"Totally incomplete list of 2019 salaries\",\n    subtitle = \"Only includes clubs with color values in \\\"teamcolors\\\" package.\",\n    y = \"\",\n    x = \"Team spending in $ millions\"\n  )\n\n\n\n\n\n\n\nFigure 1: Incomplete team spending, 2019\n\n\n\n\n\nThe colors are much nicer here, but not all the teams are represented. It is at least four years out of date."
  }
]